<!DOCTYPE html>
<html>
<head>
    <title>Controle de clientes</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/cadastroCliente.css">
</head>
<body>

    <div id="menu">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <div class="collapse navbar-collapse">
            <div class="navbar-nav">
              <a class="nav-link active" onclick="mostrarDashboard()"><i class="fas fa-home"></i> Início</span></a>
              <a class="nav-link" onclick="mostrarControleClientes()"><i class="fas fa-users"></i> Controle de clientes</span></a>
            </div>
          </div>
        </nav>
    </div>


    <!-- Pagina com o dashboard-->
    <div id="paginaInicial">
      <div class="d-sm-flex align-items-center justify-content-between mt-2 mb-2 ml-5 mr-5">
        <h1 class="h3 mb-0 text-gray-800">Painel de controle</h1>
        <div class="d-none d-sm-inline-block  shadow-sm">
          <button type="button" class="btn btn-outline-dark" onclick="calcularDadosDashboard('')">Geral</button>
          <button type="button" class="btn btn-outline-dark" onclick="calcularDadosDashboard('m')" id="mes">Mês</button>
          <button type="button" class="btn btn-outline-dark" onclick="calcularDadosDashboard('s')">Semana</button>
          <button type="button" class="btn btn-outline-dark" onclick="calcularDadosDashboard('d')">Dia</button>
        </div>
      </div>

      <div class="row ml-5 mr-5">
        <!-- Earnings (Monthly) Card Example -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Renda acima da média (>18 anos)</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="numMedio"></span></div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-user fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- classe A -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-danger shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-danger text-uppercase">
                                Classe A</div>
                              <div class="blockquote-footer mb-1"><small>Número de clientes</small></div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="numClientesA"></span></div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-coins fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- classe B -->
        <div class="col-xl-3 col-md-6 mb-4">
          <div class="card border-left-warning shadow h-100 py-2">
              <div class="card-body">
                  <div class="row no-gutters align-items-center">
                      <div class="col mr-2">
                          <div class="text-xs font-weight-bold text-warning text-uppercase">
                              Classe B</div>
                          <div class="blockquote-footer mb-1"><small>Número de clientes</small></div>
                          <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="numClientesB"></span></div>
                      </div>
                      <div class="col-auto">
                          <i class="fas fa-money-bill-wave fa-2x text-gray-300"></i>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- classe C -->
      <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-success shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase">
                            Classe C</div>
                        <div class="blockquote-footer mb-1"><small>Número de clientes</small></div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="numClientesC"></span></div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

      </div>
    </div>

    <!-- Pagina com o controle de usuário-->
    <div id="ControleClientes" style="display: none">
      <div id="page-wrapper">
        <div class="container-fluid">
          <div class="row bg-title mt-2 mb-2 ml-5 mr-5">
            <div class="col-md-12 p-0">
              <h4 class="page-title">CONTROLE DE CLIENTES</h4>
            </div>
          </div>
          <!-- alerts-->
          <div class="alert alert-success ml-5 mr-5" id="msgSucesso" style="display: none">
            Ação efetuada com sucesso!
          </div>
          <div class="alert alert-success ml-5 mr-5" id="msgExclusao" style="display: none">
            Cliente excluído com sucesso!
          </div>
          <!-- fim alerts-->

          <div class="row ml-5 mr-5 mb-2">
            <div class="col-md-9 p-0">
              <input class="form-control" id="buscarCliente" type="text" placeholder="Buscar por nome..." maxlength="150">
            </div>
            <div class="col-md-3 text-right p-0">
              <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#manterCliente" data-whatever="Novo cliente"><i class="fas fa-plus"></i> NOVO CLIENTE</button>
            </div> 
          </div>
          
          <div class="ml-5 mr-5">
            <div class="table-responsive">
              <table class="table table-bordered">
                <thead>
                  <tr>
                    <th scope="col">Nome</th>
                    <th scope="col">Renda Familiar</th>
                    <th scope="col">Ações</th>
                  </tr>
                </thead>
                <tbody id="clientes">
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Modal de de adicão/edição de cliente -->
    <div class="modal fade" id="manterCliente" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Novo cliente</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" data-tooltip="tooltip" title="Fechar">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <div class="alert alert-danger" id="cpfInvalido" style="display: none">
              CPF inválido.
            </div>
            <div class="alert alert-danger" id="cpfCadastrado" style="display: none">
              CPF já cadastrado.
            </div>
            <form id="formCliente" onsubmit="salvar();return false;">

              <input type="hidden" class="form-control" id="id" name="id">
              <div class="form-group">
                <label for="nome" class="col-form-label">Nome</label>
                <input type="text" class="form-control" id="nome" name="nome" maxlength="150" required>
              </div>
              <div class="form-group">
                <label for="cpf" class="col-form-label">CPF</label>
                <input type="text" class="form-control" id="cpf" name="cpf" minlength="11" maxlength="11" required>
              </div>
              <div class="form-group">
                <label for="dt_nascimento" class="col-form-label">Data de nascimento</label>
                <input type="date" class="form-control" id="dt_nascimento" name="dt_nascimento" required>
              </div>
              <div class="form-group">
                <label for="dt_cadastro" class="col-form-label">Data de cadastro</label>
                <input type="date" class="form-control" id="dt_cadastro" name="dt_cadastro" readonly>
              </div>
              <div class="form-group">
                <label for="renda_familiar" class="col-form-label">Renda familiar</label>
                <input type="number" step="0.01" class="form-control" id="renda_familiar" name="renda_familiar" min="0">
              </div>

              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-primary" >Salvar</button>
              </div>

            </form>
          </div>

        </div>
      </div>
    </div>
    <!-- Fim do modal -->

</body>
</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
<script src="../js/clientes-api.js"></script>
<script src="../js/controleClientes.js"></script>